{
  "version": 3,
  "sources": ["../../src/actions/sendClassNotification.ts"],
  "sourcesContent": ["import { differenceInMinutes, isToday } from \"date-fns\";\r\nimport * as WAWebJS from \"whatsapp-web.js\";\r\nimport { CALENDAR } from \"../resources/calendar\";\r\nimport { Calendar } from \"../types/types\";\r\n\r\n// const getDifferenceInMins = (date1: Date, date2: Date) => {\r\n//   var diff = (date1.getTime() - date2.getTime()) / 60000;\r\n//   return Math.abs(Math.round(diff));\r\n// };\r\n\r\n// Add Indian Time - `Classic Function`\r\n// export function addIndianTime(date: Date): Date {\r\n//   let numberOfMilliseconds = date.getTime();\r\n//   let t0530inMilliseconds = 19800000;\r\n//   date = new Date(numberOfMilliseconds + t0530inMilliseconds);\r\n//   return date;\r\n// }\r\n\r\nconst checkForClass = (calendar: Calendar): Calendar | [] => {\r\n  let todayCalendar: Calendar = [];\r\n  // const date = addIndianTime(new Date());\r\n  const date = new Date();\r\n  calendar.forEach((clndr) => {\r\n    if (isToday(clndr.date)) {\r\n      const difference = differenceInMinutes(clndr.date, date);\r\n      if (difference < 5 && 0 < difference) {\r\n        todayCalendar.push({ ...clndr, numberOfMinutes: 5 });\r\n      } else if (difference < 10 && 0 < difference) {\r\n        todayCalendar.push({ ...clndr, numberOfMinutes: 10 });\r\n      }\r\n    }\r\n  });\r\n  return todayCalendar;\r\n};\r\n\r\nexport const sendClassNotification = (bot: WAWebJS.Chat) => {\r\n  const classes = checkForClass(CALENDAR);\r\n  if (!!classes.length) {\r\n    let message = \"\u26A0 Attention Guys!! \u26A0 CLASS!\\n\\n\uD83D\uDCD8*Today's Classes*\uD83D\uDCD8\";\r\n    classes.forEach(\r\n      (event) =>\r\n        (message += `\\n -------------------------------- \\n\uD83D\uDCD6 *Topic*      : *${event.topic}* \\n\uD83D\uDD70 *Time*   : _Starting in *${event.numberOfMinutes}* minutes_\\n\uD83D\uDCC5 *Date*       : *Today!* \\n\uD83C\uDFEB *Course*  : ${event.courseName}\\n*Calendar Link*: https://calendar.google.com/calendar/u/0/r/day `)\r\n    );\r\n    bot.sendMessage(message);\r\n  }\r\n};\r\n"],
  "mappings": "s6BAAA,+CAA6C,uBAE7C,EAAyB,oCAgBzB,KAAM,GAAgB,AAAC,GAAsC,CAC3D,GAAI,GAA0B,GAE9B,KAAM,GAAO,GAAI,MACjB,SAAS,QAAQ,AAAC,GAAU,CAC1B,GAAI,cAAQ,EAAM,MAAO,CACvB,KAAM,GAAa,0BAAoB,EAAM,KAAM,GACnD,AAAI,EAAa,GAAK,EAAI,EACxB,EAAc,KAAK,OAAK,GAAL,CAAY,gBAAiB,KACvC,EAAa,IAAM,EAAI,GAChC,EAAc,KAAK,OAAK,GAAL,CAAY,gBAAiB,SAI/C,GAGI,EAAwB,AAAC,GAAsB,CAC1D,KAAM,GAAU,EAAc,YAC9B,GAAM,EAAQ,OAAQ,CACpB,GAAI,GAAU;AAAA;AAAA,qCACd,EAAQ,QACN,AAAC,GACE,GAAW;AAAA;AAAA,4BAA4D,EAAM;AAAA,qCAAwC,EAAM;AAAA;AAAA,wBAA0E,EAAM;AAAA,mEAEhN,EAAI,YAAY",
  "names": []
}
