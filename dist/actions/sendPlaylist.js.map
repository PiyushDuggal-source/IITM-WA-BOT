{
  "version": 3,
  "sources": ["../../src/actions/sendPlaylist.ts"],
  "sourcesContent": ["import * as WAWebJS from \"whatsapp-web.js\";\r\nimport { BOT } from \"..\";\r\nimport { PLAYLISTS } from \"../resources/notes\";\r\nimport { MessageType, YT_Playlist } from \"../types/types\";\r\nimport { FOOTERS } from \"../utils/reply/footers\";\r\nimport { GREETINGS, HEY_EMOJIES } from \"../utils/reply/replies\";\r\nimport { sendAndDeleteMsg } from \"./sendAndDeleteMsg\";\r\nimport { random } from \"./sendMessage\";\r\n\r\n// Helper Functions\r\nconst playlistFormatter = (playlist: YT_Playlist, content: string) => {\r\n  playlist.forEach((playlist) => {\r\n    content += `\\n\\n${playlist.name}\\n${playlist.link}`;\r\n  });\r\n  content += `\\n\\n:${FOOTERS.footers[random(FOOTERS.footerMsgLength)]}`;\r\n  return content;\r\n};\r\nlet userMsg = `*These are your course PlayLists ${\r\n  HEY_EMOJIES[random(HEY_EMOJIES.length)]\r\n}*\\n\\n*Use filters if you want specific subject's Playlist(s)\\nEg: *!Playlist {SubjectName}* _without {}_`;\r\n\r\nlet adminMsg = `*These are your course PlayLists ${\r\n  HEY_EMOJIES[random(HEY_EMOJIES.length)]\r\n}*`;\r\n\r\nconst sorryMsg = `Sorry ${\r\n  GREETINGS.member[random(GREETINGS.memberMsgNumber)]\r\n}\\nOnly one word is allowed after !playlist command ${\r\n  HEY_EMOJIES[random(HEY_EMOJIES.length)]\r\n}`;\r\n\r\nconst invalidMsg =\r\n  \"The filter is invalid or notes are not updated with the respective subject, please wait for a while we will upload the respective notes soon\";\r\n\r\nexport const sendPlayList = async (\r\n  client: WAWebJS.Client,\r\n  messageInstance: WAWebJS.Message,\r\n  who: MessageType\r\n) => {\r\n  let content = who === \"ADMIN\" ? adminMsg : userMsg;\r\n  content = playlistFormatter(PLAYLISTS, content);\r\n  if (who === \"ADMIN\") {\r\n    const chats = await client.getChats();\r\n    const bot = chats[BOT];\r\n    bot.sendMessage(content);\r\n  } else if (who !== \"NONE\") {\r\n    sendAndDeleteMsg(client, messageInstance, who, content);\r\n  }\r\n};\r\n\r\nexport const sendPlayListByFilter = async (\r\n  client: WAWebJS.Client,\r\n  messageBody: string,\r\n  messageInstance: WAWebJS.Message,\r\n  who: MessageType\r\n) => {\r\n  if (who !== \"NONE\") {\r\n    const msgList = messageBody.split(\" \");\r\n    const chats = await client.getChats();\r\n    const bot = chats[BOT];\r\n    if (msgList.length > 2) {\r\n      bot.sendMessage(sorryMsg);\r\n    } else {\r\n      const filteredPlaylist = PLAYLISTS.filter((playlist) => {\r\n        return playlist.name\r\n          .toLocaleLowerCase()\r\n          .includes(msgList[1].toLocaleLowerCase());\r\n      });\r\n      if (!filteredPlaylist.length) {\r\n        bot.sendMessage(invalidMsg);\r\n      } else if (who === \"ADMIN\") {\r\n        let content = adminMsg;\r\n        content = playlistFormatter(filteredPlaylist, content);\r\n        bot.sendMessage(content);\r\n      } else {\r\n        let content = userMsg;\r\n        content = playlistFormatter(filteredPlaylist, content);\r\n        sendAndDeleteMsg(client, messageInstance, who, content);\r\n      }\r\n    }\r\n  }\r\n};\r\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,kBAAAE,EAAA,yBAAAC,IAAA,eAAAC,EAAAJ,GACA,IAAAK,EAAoB,cACpBC,EAA0B,8BAE1BC,EAAwB,kCACxBC,EAAuC,kCACvCC,EAAiC,8BACjCC,EAAuB,yBAGvB,MAAMC,EAAoB,CAACC,EAAuBC,KAChDD,EAAS,QAASA,GAAa,CAC7BC,GAAW;AAAA;AAAA,EAAOD,EAAS;AAAA,EAASA,EAAS,MAC/C,CAAC,EACDC,GAAW;AAAA;AAAA,GAAQ,UAAQ,WAAQ,UAAO,UAAQ,eAAe,CAAC,IAC3DA,GAET,IAAIC,EAAU,oCACZ,iBAAY,UAAO,cAAY,MAAM,CAAC;AAAA;AAAA;AAAA,4CAGpCC,EAAW,oCACb,iBAAY,UAAO,cAAY,MAAM,CAAC,KAGxC,MAAMC,EAAW,SACf,YAAU,UAAO,UAAO,YAAU,eAAe,CAAC;AAAA,mDAElD,iBAAY,UAAO,cAAY,MAAM,CAAC,IAGlCC,EACJ,+IAEWf,EAAe,MAC1BgB,EACAC,EACAC,IACG,CACH,IAAIP,EAAUO,IAAQ,QAAUL,EAAWD,EAC3CD,EAAUF,EAAkB,YAAWE,CAAO,EAC1CO,IAAQ,SACI,MAAMF,EAAO,SAAS,GAClB,KAAG,EACjB,YAAYL,CAAO,EACdO,IAAQ,WACjB,oBAAiBF,EAAQC,EAAiBC,EAAKP,CAAO,CAE1D,EAEaV,EAAuB,MAClCe,EACAG,EACAF,EACAC,IACG,CACH,GAAIA,IAAQ,OAAQ,CAClB,MAAME,EAAUD,EAAY,MAAM,GAAG,EAE/BE,GADQ,MAAML,EAAO,SAAS,GAClB,KAAG,EACrB,GAAII,EAAQ,OAAS,EACnBC,EAAI,YAAYP,CAAQ,MACnB,CACL,MAAMQ,EAAmB,YAAU,OAAQZ,GAClCA,EAAS,KACb,kBAAkB,EAClB,SAASU,EAAQ,CAAC,EAAE,kBAAkB,CAAC,CAC3C,EACD,GAAI,CAACE,EAAiB,OACpBD,EAAI,YAAYN,CAAU,UACjBG,IAAQ,QAAS,CAC1B,IAAIP,EAAUE,EACdF,EAAUF,EAAkBa,EAAkBX,CAAO,EACrDU,EAAI,YAAYV,CAAO,CACzB,KAAO,CACL,IAAIA,EAAUC,EACdD,EAAUF,EAAkBa,EAAkBX,CAAO,KACrD,oBAAiBK,EAAQC,EAAiBC,EAAKP,CAAO,CACxD,CACF,CACF,CACF",
  "names": ["sendPlaylist_exports", "__export", "sendPlayList", "sendPlayListByFilter", "__toCommonJS", "import__", "import_notes", "import_footers", "import_replies", "import_sendAndDeleteMsg", "import_sendMessage", "playlistFormatter", "playlist", "content", "userMsg", "adminMsg", "sorryMsg", "invalidMsg", "client", "messageInstance", "who", "messageBody", "msgList", "bot", "filteredPlaylist"]
}
