{
  "version": 3,
  "sources": ["../../src/actions/sendClassMessage.ts"],
  "sourcesContent": ["import * as WAWebJS from \"whatsapp-web.js\";\r\nimport { BOT } from \"..\";\r\nimport { CALENDAR } from \"../resources/calendar\";\r\nimport { Calendar, MessageType } from \"../types/types\";\r\nimport { FOOTERS } from \"../utils/reply/footers\";\r\nimport { HOLIDAY_REPLIES } from \"../utils/reply/replies\";\r\nimport { random, sendMessage } from \"./sendMessage\";\r\n\r\nconst checkForClass = (calendar: Calendar) => {\r\n  const date = new Date();\r\n  return calendar.filter(\r\n    (event) => event.date.toDateString() === date.toDateString()\r\n  );\r\n};\r\n\r\nconst HOLYDAY_MSG = `${process.env.BOT_NAME as String} : ${\r\n  HOLIDAY_REPLIES.members[random(HOLIDAY_REPLIES.members.length)]\r\n} \\n: ${FOOTERS.footers[random(FOOTERS.footerMsgLength)]}`;\r\n\r\nexport const sendClassMessage = async (\r\n  client: WAWebJS.Client,\r\n  messageInstance: WAWebJS.Message,\r\n  who: MessageType\r\n) => {\r\n  const events = checkForClass(CALENDAR);\r\n  if (who === \"ADMIN\") {\r\n    const chats = await client.getChats();\r\n    const WA_BOT = chats[BOT];\r\n    if (!events.length) {\r\n      WA_BOT.sendMessage(HOLYDAY_MSG);\r\n    } else {\r\n      let message = \"\uD83D\uDCD8*Today's Classes*\uD83D\uDCD8\";\r\n      events.forEach(\r\n        (event) =>\r\n          (message += `\\n -------------------------------- \\n\uD83D\uDCD6 *Topic* : *${event.topic}* \\n\uD83D\uDD70 *Timing* : _${event.time}_ \\n\uD83D\uDCC5 *Date* : *Today!* \\n\uD83C\uDFEB *Course* : ${event.courseName}\\n `)\r\n      );\r\n      WA_BOT.sendMessage(message);\r\n    }\r\n  } else if (who !== \"NONE\") {\r\n    if (!events.length) {\r\n      sendMessage(client, HOLYDAY_MSG, messageInstance, who, undefined, {\r\n        classMsg: true,\r\n      });\r\n    } else {\r\n      let message = \"\uD83D\uDCD8*Today's Classes*\uD83D\uDCD8\";\r\n      events.forEach(\r\n        (event) =>\r\n          (message += `\\n -------------------------------- \\n\uD83D\uDCD6 *Topic* : *${event.topic}* \\n\uD83D\uDD70 *Timing* : _${event.time}_ \\n\uD83D\uDCC5 *Date* : *Today!* \\n\uD83C\uDFEB *Course* : ${event.courseName}\\n `)\r\n      );\r\n      sendMessage(client, message, messageInstance, who, undefined, {\r\n        classMsg: true,\r\n      });\r\n    }\r\n  }\r\n};\r\n"],
  "mappings": "yaAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,sBAAAE,IAAA,eAAAC,EAAAH,GACA,IAAAI,EAAoB,cACpBC,EAAyB,iCAEzBC,EAAwB,kCACxBC,EAAgC,kCAChCC,EAAoC,yBAEpC,MAAMC,EAAiBC,GAAuB,CAC5C,MAAMC,EAAO,IAAI,KACjB,OAAOD,EAAS,OACbE,GAAUA,EAAM,KAAK,aAAa,IAAMD,EAAK,aAAa,CAC7D,CACF,EAEME,EAAc,GAAG,QAAQ,IAAI,cACjC,kBAAgB,WAAQ,UAAO,kBAAgB,QAAQ,MAAM,CAAC;AAAA,IACxD,UAAQ,WAAQ,UAAO,UAAQ,eAAe,CAAC,IAE1CX,EAAmB,MAC9BY,EACAC,EACAC,IACG,CACH,MAAMC,EAASR,EAAc,UAAQ,EACrC,GAAIO,IAAQ,QAAS,CAEnB,MAAME,GADQ,MAAMJ,EAAO,SAAS,GACf,KAAG,EACxB,GAAI,CAACG,EAAO,OACVC,EAAO,YAAYL,CAAW,MACzB,CACL,IAAIM,EAAU,sCACdF,EAAO,QACJL,GACEO,GAAW;AAAA;AAAA,uBAAuDP,EAAM;AAAA,wBAA2BA,EAAM;AAAA;AAAA,uBAAgDA,EAAM;AAAA,EACpK,EACAM,EAAO,YAAYC,CAAO,CAC5B,CACF,SAAWH,IAAQ,OACjB,GAAI,CAACC,EAAO,UACV,eAAYH,EAAQD,EAAaE,EAAiBC,EAAK,OAAW,CAChE,SAAU,EACZ,CAAC,MACI,CACL,IAAIG,EAAU,sCACdF,EAAO,QACJL,GACEO,GAAW;AAAA;AAAA,uBAAuDP,EAAM;AAAA,wBAA2BA,EAAM;AAAA;AAAA,uBAAgDA,EAAM;AAAA,EACpK,KACA,eAAYE,EAAQK,EAASJ,EAAiBC,EAAK,OAAW,CAC5D,SAAU,EACZ,CAAC,CACH,CAEJ",
  "names": ["sendClassMessage_exports", "__export", "sendClassMessage", "__toCommonJS", "import__", "import_calendar", "import_footers", "import_replies", "import_sendMessage", "checkForClass", "calendar", "date", "event", "HOLYDAY_MSG", "client", "messageInstance", "who", "events", "WA_BOT", "message"]
}
