{
  "version": 3,
  "sources": ["../../src/actions/sendClassMessage.ts"],
  "sourcesContent": ["import * as WAWebJS from \"whatsapp-web.js\";\nimport { BOT } from \"..\";\nimport { CALENDAR } from \"../resources/calendar\";\nimport { Calendar, MessageType } from \"../types/types\";\nimport { FOOTERS } from \"../utils/reply/footers\";\nimport { HOLIDAY_REPLIES } from \"../utils/reply/replies\";\nimport { random, sendMessage } from \"./sendMessage\";\n\nconst checkForClass = (calendar: Calendar) => {\n  const date = new Date();\n  return calendar.filter(\n    (event) => event.date.toDateString() === date.toDateString()\n  );\n};\n\nconst HOLYDAY_MSG = `${process.env.BOT_NAME as String} : ${\n  HOLIDAY_REPLIES.members[random(HOLIDAY_REPLIES.members.length)]\n} \\n: ${FOOTERS.footers[random(FOOTERS.footerMsgLength)]}`;\n\nexport const sendClassMessage = async (\n  client: WAWebJS.Client,\n  messageInstance: WAWebJS.Message,\n  who: MessageType\n) => {\n  const events = checkForClass(CALENDAR);\n  if (who === \"ADMIN\") {\n    const chats = await client.getChats();\n    const WA_BOT = chats[BOT];\n    if (!events.length) {\n      WA_BOT.sendMessage(HOLYDAY_MSG);\n    } else {\n      let message = \"\uD83D\uDCD8*Today's Classes*\uD83D\uDCD8\";\n      events.forEach(\n        (event) =>\n          (message += `\\n -------------------------------- \\n\uD83D\uDCD6 *Topic* : *${event.topic}* \\n\uD83D\uDD70 *Timing* : _${event.time}_ \\n\uD83D\uDCC5 *Date* : *Today!* \\n\uD83C\uDFEB *Course* : ${event.courseName}\\n `)\n      );\n      WA_BOT.sendMessage(message);\n    }\n  } else if (who !== \"NONE\") {\n    if (!events.length) {\n      sendMessage(client, HOLYDAY_MSG, messageInstance, who, undefined, {\n        classMsg: true,\n      });\n    } else {\n      let message = \"\uD83D\uDCD8*Today's Classes*\uD83D\uDCD8\";\n      events.forEach(\n        (event) =>\n          (message += `\\n -------------------------------- \\n\uD83D\uDCD6 *Topic* : *${event.topic}* \\n\uD83D\uDD70 *Timing* : _${event.time}_ \\n\uD83D\uDCC5 *Date* : *Today!* \\n\uD83C\uDFEB *Course* : ${event.courseName}\\n `)\n      );\n      sendMessage(client, message, messageInstance, who, undefined, {\n        classMsg: true,\n      });\n    }\n  }\n};\n"],
  "mappings": "mlBAAA,oCACA,MAAoB,iBACpB,EAAyB,oCAEzB,EAAwB,qCACxB,EAAgC,qCAChC,EAAoC,4BAEpC,KAAM,GAAgB,AAAC,GAAuB,CAC5C,KAAM,GAAO,GAAI,MACjB,MAAO,GAAS,OACd,AAAC,GAAU,EAAM,KAAK,iBAAmB,EAAK,iBAI5C,EAAc,GAAG,QAAQ,IAAI,cACjC,kBAAgB,QAAQ,aAAO,kBAAgB,QAAQ;AAAA,IACjD,UAAQ,QAAQ,aAAO,UAAQ,oBAE1B,EAAmB,MAC9B,EACA,EACA,IACG,CACH,KAAM,GAAS,EAAc,YAC7B,GAAI,IAAQ,QAAS,CAEnB,KAAM,GAAS,AADD,MAAM,GAAO,YACN,OACrB,GAAI,CAAC,EAAO,OACV,EAAO,YAAY,OACd,CACL,GAAI,GAAU,sCACd,EAAO,QACL,AAAC,GACE,GAAW;AAAA;AAAA,uBAAuD,EAAM;AAAA,wBAA2B,EAAM;AAAA;AAAA,uBAAgD,EAAM;AAAA,IAEpK,EAAO,YAAY,YAEZ,IAAQ,OACjB,GAAI,CAAC,EAAO,OACV,kBAAY,EAAQ,EAAa,EAAiB,EAAK,OAAW,CAChE,SAAU,SAEP,CACL,GAAI,GAAU,sCACd,EAAO,QACL,AAAC,GACE,GAAW;AAAA;AAAA,uBAAuD,EAAM;AAAA,wBAA2B,EAAM;AAAA;AAAA,uBAAgD,EAAM;AAAA,IAEpK,kBAAY,EAAQ,EAAS,EAAiB,EAAK,OAAW,CAC5D,SAAU",
  "names": []
}
